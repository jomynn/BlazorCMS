@page "/"
@using BlazorCMS.Shared.DTOs
@inject AdminBlogService BlogService
@inject ILogger<Index> Logger

<h3>Blog Management</h3>

@if (blogs == null)
{
    <p>Loading blogs...</p>
}
else
{
    <ul>
        @foreach (var blog in blogs)
        {
            <li>@blog.Title</li>
        }
    </ul>
}

@code {
    private List<BlogPostDTO> blogs;

    protected override async Task OnInitializedAsync()
    {
        Logger.LogInformation("📄 Index page loaded. Fetching blogs...");
        blogs = await BlogService.GetAllBlogsAsync();
        Logger.LogInformation("✅ Loaded {Count} blogs.", blogs?.Count ?? 0);
    }
}
